<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุญุต ุงูุนูููุงุช ุงูุญุณุงุจูุฉ - ุฌุฏูู ุชููุงุฆู</title>
    <!-- ุถุน ูุฐุง ุงูููุฏ ุฏุงุฎู <head> -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐งฎ</text></svg>">
    <!-- ููุชุจุฉ Tesseract.js ูุงุณุชุฎุฑุงุฌ ุงููุต ูู ุงูุตูุฑ -->
<script src="https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js"></script>

<!-- ููุชุจุฉ ูุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            margin: 0;
            padding: 15px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            padding: 15px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 22px;
        }

        .description {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .calculation-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .calculation-table th {
            background-color: #3498db;
            color: white;
            padding: 12px;
            text-align: center;
            font-size: 16px;
            position: sticky;
            top: 0;
        }

        .calculation-table td {
            padding: 12px;
            border: 1px solid #e0e0e0;
            text-align: center;
            vertical-align: top;
        }

        .input-cell {
            background-color: #f8f9fa;
        }

        .result-cell {
            background-color: #f0f7ff;
            font-weight: bold;
            width: 35%;
            min-width: 120px;
        }

        .correct {
            color: #27ae60;
        }

        .incorrect {
            color: #e74c3c;
        }

        .text-input {
            width: 100%;
            height: 100px;
            padding: 10px;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 6px;
            resize: vertical;
            transition: border 0.3s;
            font-family: monospace;
            line-height: 1.4;
        }

        .text-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .instructions {
            background-color: #f8f9fa;
            border-right: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .instructions h3 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 18px;
        }

        .instructions ul {
            padding-right: 18px;
            margin-bottom: 0;
        }

        .instructions li {
            margin-bottom: 8px;
            font-size: 14px;
        }

        .examples {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .example-btn {
            background-color: #ecf0f1;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 13px;
            flex: 1;
            min-width: 120px;
            text-align: center;
        }

        .example-btn:hover {
            background-color: #d5dbdb;
        }

        .actions {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .clear-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 12px 24px;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .clear-btn:hover {
            background-color: #c0392b;
        }

        .footer {
            text-align: center;
            margin-top: 25px;
            color: #7f8c8d;
            font-size: 13px;
        }

        .auto-check-info {
            background-color: #e8f6f3;
            padding: 8px 12px;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 13px;
            text-align: center;
            border-right: 3px solid #1abc9c;
        }

        .operation-details {
            margin-top: 8px;
            padding: 6px;
            background-color: #f9f9f9;
            border-radius: 4px;
            font-size: 12px;
            text-align: right;
        }

        .operation-highlight {
            background-color: #fffacd;
            padding: 3px 6px;
            border-radius: 3px;
            font-family: monospace;
            margin: 4px 0;
            font-size: 13px;
            word-break: break-all;
        }

        .paste-indicator {
            position: absolute;
            top: 5px;
            left: 5px;
            background-color: rgba(52, 152, 219, 0.9);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .text-input-container {
            position: relative;
        }

        .showing {
            opacity: 1;
        }

        .row-number {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .calculation-table {
                display: block;
                overflow-x: auto;
            }

            .calculation-table th,
            .calculation-table td {
                min-width: 150px;
            }

            .result-cell {
                width: 40%;
            }
        }

        .empty-row {
            opacity: 0.7;
        }

        .empty-row .text-input {
            border-style: dashed;
            border-color: #aaa;
        }

        .status-icon {
            font-size: 20px;
            margin-left: 5px;
        }



        /* ุฅุถุงูุฉ ูุฐู ุงูุฃููุงุท ุฅูู ูุณู ุงูุณุชุงูู ุงูุญุงูู */

        .table-container {
            width: 100%;
            overflow-x: auto;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .calculation-table {
            width: 100%;
            min-width: 600px;
            /* ุงูุญุฏ ุงูุฃุฏูู ูุนุฑุถ ุงูุฌุฏูู */
            border-collapse: collapse;
            transition: all 0.3s ease;
        }

        /* ููุท ููุดุงุดุงุช ุงูุตุบูุฑุฉ ุฌุฏุงู */
        @media (max-width: 640px) {
            .calculation-table {
                min-width: 500px;
            }

            .calculation-table th,
            .calculation-table td {
                padding: 10px 8px;
                font-size: 14px;
            }

            .text-input {
                height: 90px;
                font-size: 13px;
                padding: 8px;
            }

            .result-cell {
                min-width: 100px;
            }
        }

        /* ููุท ููุดุงุดุงุช ุงููุชูุณุทุฉ */
        @media (min-width: 641px) and (max-width: 1024px) {
            .calculation-table {
                min-width: 100%;
            }

            .result-cell {
                width: 30%;
            }

            .input-cell {
                width: 70%;
            }
        }

        /* ููุท ููุดุงุดุงุช ุงููุจูุฑุฉ */
        @media (min-width: 1025px) {
            .calculation-table {
                min-width: 100%;
            }

            .container {
                max-width: 1200px;
            }
        }

        /* ุฅุถุงูุฉ ุดุฑูุท ุชูุฑูุฑ ุฃููู ููุฌุฏูู */
        .table-container::-webkit-scrollbar {
            height: 8px;
        }

        .table-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }



        /* ุฅุตูุงุญ ูุดุงูู ุงูููุณ ุนูู ุงูุฌูุงู */
        @media (max-width: 768px) {
            body {
                -webkit-text-size-adjust: 100%;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            }

            .text-input {
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
            }

            /* ุชุญุณูู ุชุฌุฑุจุฉ ุงูุชูุฑูุฑ ุนูู ุงูุฌูุงู */
            .table-container {
                -webkit-overflow-scrolling: touch;
            }

            /* ุชุญุณูู ุญุฌู ุงูุฎุท ููุดุงุดุงุช ุงูุตุบูุฑุฉ */
            .result-text {
                font-size: 16px !important;
            }

            .row-number {
                font-size: 11px;
            }
        }




        /* ุฅุถุงูุฉ ูุฐู ุงูุฃููุงุท ุฅูู ูุณู ุงูุณุชุงูู ุงูุญุงูู */

        .collapsible-instructions {
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .instructions-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: #3498db;
            color: white;
            cursor: pointer;
            user-select: none;
        }

        .instructions-header h3 {
            margin: 0;
            font-size: 18px;
            color: white;
        }

        .toggle-icon {
            font-size: 20px;
            transition: transform 0.3s ease;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toggle-icon.collapsed {
            transform: rotate(180deg);
        }

        .instructions-content {
            padding: 0;
            max-height: 1000px;
            opacity: 1;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .instructions-content.collapsed {
            padding: 0;
            max-height: 0;
            opacity: 0;
        }

        .instructions-body {
            padding: 15px;
        }

        /* ุชุญุณููุงุช ููุดุงุดุงุช ุงูุตุบูุฑุฉ */
        @media (max-width: 768px) {
            .instructions-header {
                padding: 12px;
            }

            .instructions-header h3 {
                font-size: 16px;
            }

            .instructions-body {
                padding: 12px;
            }
        }



        /* ุฅุถุงูุฉ ูุฐู ุงูุฃููุงุท ูุชุญุณูู ุงูุฑุณูู ุงููุชุญุฑูุฉ */
.instructions-header {
    transition: background-color 0.2s ease;
}

.instructions-header:hover {
    background-color: #2980b9;
}

/* ุชุฃุซูุฑ ููุถุบุท ุนูู ุงูุฒุฑ */
.instructions-header:active {
    background-color: #2472a4;
    transform: translateY(1px);
}

/* ุชุญุณูู ูุธูุฑ ุงููุงุฆูุฉ */
.instructions-body ul {
    padding-right: 18px;
    margin-bottom: 15px;
}

.instructions-body li {
    margin-bottom: 8px;
    padding-right: 5px;
    transition: color 0.2s ease;
}

.instructions-body li:hover {
    color: #2c3e50;
}

/* ุชุญุณูู ูุธูุฑ ุฃูุซูุฉ ุงูุงุฎุชุจุงุฑ */
.examples {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 15px;
}

.example-btn {
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.example-btn:active {
    transform: scale(0.98);
}

/* ุชุฃุซูุฑ ุฑุงุฆุน ููุฃุฒุฑุงุฑ */
.example-btn::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
}

.example-btn:focus:not(:active)::after {
    animation: ripple 1s ease-out;
}

@keyframes ripple {
    0% {
        transform: scale(0, 0);
        opacity: 0.5;
    }
    100% {
        transform: scale(20, 20);
        opacity: 0;
    }
}





/* ุฅุถุงูุฉ ูุฐู ุงูุฃููุงุท ุฅูู ูุณู ุงูุณุชุงูู */

.total-check {
    margin-top: 10px;
    padding: 10px;
    border-radius: 6px;
    font-size: 14px;
}

.total-correct {
    background-color: #e8f6f3;
    border-right: 4px solid #27ae60;
    color: #27ae60;
}

.total-incorrect {
    background-color: #ffebee;
    border-right: 4px solid #e74c3c;
    color: #e74c3c;
}

.operations-count {
    font-size: 12px;
    color: #7f8c8d;
    margin-bottom: 8px;
}



/* ุชุญุณููุงุช ูููุงููุฑุง */
#camera-btn:hover {
    background: linear-gradient(135deg, #128C7E, #075E54);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
    transition: all 0.3s ease;
}

#capture-btn:hover {
    background: #2980b9;
    transform: scale(1.05);
}

#flip-camera:hover {
    background: #6c7a7d;
    transform: scale(1.05);
}

#use-text-btn:hover {
    background: #27ae60;
    transform: scale(1.05);
}

#retry-btn:hover {
    background: #e67e22;
    transform: scale(1.05);
}

/* ุชุญุณููุงุช ููุฌูุงู */
@media (max-width: 768px) {
    #camera-modal > div {
        width: 95%;
        padding: 15px;
    }
    
    .video-container {
        height: 60vh;
    }
}

/* ุฑุณูู ูุชุญุฑูุฉ */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

#camera-btn:active {
    animation: pulse 0.2s ease;
}

/* ุชุญุณูู ูุธูุฑ ุงููุต ุงููุณุชุฎุฑุฌ */
#extracted-text {
    line-height: 1.6;
    background: white;
    padding: 10px;
    border-radius: 4px;
    border: 1px solid #ddd;
    font-size: 14px;
}

/* ูุคุดุฑ ุชุญููู */
.fa-spin {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}



    </style>
</head>

<body>


    <div class="container">
        <h1>ุฃุฏุงุฉ ูุญุต ุงูุนูููุงุช ุงูุญุณุงุจูุฉ   </h1>

        <!-- ุฒุฑ ูุชุญ ุงููุงููุฑุง -->
<button id="camera-btn" style="
    background: linear-gradient(135deg, #25D366, #128C7E);
    color: white;
    border: none;
    padding: 15px 25px;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    margin: 10px auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%;
    max-width: 300px;
">
    <i class="fas fa-camera"></i>
    ูุณุญ ุงููุต ุจุงููุงููุฑุง
</button>


<div style="
    background: #f8f9fa;
    border-right: 4px solid #25D366;
    padding: 15px;
    margin: 15px 0;
    border-radius: 8px;
    font-size: 14px;
">
    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
        <i class="fas fa-info-circle" style="color: #25D366; font-size: 18px;"></i>
        <strong style="color: #333;">ููููุฉ ุงุณุชุฎุฏุงู ุงููุงููุฑุง ูุน ุงููุงุชุณุงุจ ููุจ:</strong>
    </div>
    <ol style="margin: 0; padding-right: 20px; color: #555;">
        <li>ุงูุชุญ ุงููุงุชุณุงุจ ููุจ ุนูู ุงูููุจููุชุฑ</li>
        <li>ุงูุชุญ ุงููุญุงุฏุซุฉ ุงูุชู ุชุญุชูู ุนูู ุงููุต</li>
        <li>ุงุถุบุท ุฒุฑ "ูุณุญ ุงููุต ุจุงููุงููุฑุง" ูู ูุฐุง ุงูุชุทุจูู</li>
        <li>ูุฌู ูุงููุฑุง ุงูููุจุงูู ูุญู ุดุงุดุฉ ุงูููุจููุชุฑ</li>
        <li>ุงุถุบุท "ุงูุชูุงุท" ุนูุฏูุง ูููู ุงููุต ูุงุถุญุงู</li>
        <li>ุงูุชุธุฑ ุงุณุชุฎุฑุงุฌ ุงููุต ุซู ุงุถุบุท "ุงุณุชุฎุฏุงู ุงููุต"</li>
    </ol>
</div>

<!-- ูุงูุฐุฉ ุงููุงููุฑุง -->
<div id="camera-modal" style="
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    padding: 20px;
">

    <div style="
        background: white;
        border-radius: 10px;
        padding: 20px;
        max-width: 90%;
        max-height: 90%;
        overflow: auto;
    ">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0; color: #333;">ูุณุญ ุงููุต ุจุงููุงููุฑุง</h3>
            <button id="close-camera" style="
                background: #e74c3c;
                color: white;
                border: none;
                border-radius: 50%;
                width: 30px;
                height: 30px;
                cursor: pointer;
                font-size: 18px;
            ">ร</button>
        </div>

        <!-- ููุฏูู ุงููุงููุฑุง -->
        <video id="camera-video" autoplay playsinline style="
            width: 100%;
            max-width: 500px;
            border-radius: 8px;
            background: #000;
            margin-bottom: 15px;
        "></video>

        <!-- ุงูุฃุฒุฑุงุฑ -->
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button id="capture-btn" style="
                background: #3498db;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                display: flex;
                align-items: center;
                gap: 8px;
            ">
                <i class="fas fa-camera"></i> ุงูุชูุงุท
            </button>
            
            <button id="flip-camera" style="
                background: #7f8c8d;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                display: flex;
                align-items: center;
                gap: 8px;
            ">
                <i class="fas fa-sync-alt"></i> ุชุจุฏูู ุงููุงููุฑุง
            </button>
        </div>

        <!-- ูุนุงููุฉ ุงูุตูุฑุฉ -->
        <canvas id="photo-canvas" style="
            display: none;
            width: 100%;
            max-width: 500px;
            border-radius: 8px;
            margin: 15px 0;
        "></canvas>

        <!-- ูุชูุฌุฉ ุงูุงุณุชุฎุฑุงุฌ -->
        <div id="ocr-result" style="
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            display: none;
            max-height: 200px;
            overflow-y: auto;
        ">
            <div style="font-weight: bold; margin-bottom: 10px; color: #2c3e50;">
                ุงููุต ุงููุณุชุฎุฑุฌ:
            </div>
            <div id="extracted-text" style="white-space: pre-wrap; font-family: monospace;"></div>
        </div>

        <!-- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช -->
        <div id="action-buttons" style="display: none; margin-top: 15px; gap: 10px;">
            <button id="use-text-btn" style="
                background: #2ecc71;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                flex: 1;
            ">
                <i class="fas fa-check"></i> ุงุณุชุฎุฏุงู ุงููุต
            </button>
            
            <button id="retry-btn" style="
                background: #f39c12;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                flex: 1;
            ">
                <i class="fas fa-redo"></i> ุฅุนุงุฏุฉ ุงููุญุงููุฉ
            </button>
        </div>

        <!-- ูุคุดุฑ ุงูุชุญููู -->
        <div id="ocr-loading" style="
            display: none;
            text-align: center;
            padding: 20px;
            color: #3498db;
        ">
            <i class="fas fa-spinner fa-spin fa-2x"></i>
            <div style="margin-top: 10px;">ุฌุงุฑู ุงุณุชุฎุฑุงุฌ ุงููุต ูู ุงูุตูุฑุฉ...</div>
        </div>
    </div>

    <!-- ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู -->
    <div style="color: white; margin-top: 15px; text-align: center; max-width: 500px;">
        <div style="display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 5px;">
                <i class="fas fa-lightbulb" style="color: #f1c40f;"></i>
                <span>1. ูุฌู ุงููุงููุฑุง ูุญู ุงููุต</span>
            </div>
            <div style="display: flex; align-items: center; gap: 5px;">
                <i class="fas fa-lightbulb" style="color: #f1c40f;"></i>
                <span>2. ุงุถุบุท "ุงูุชูุงุท"</span>
            </div>
            <div style="display: flex; align-items: center; gap: 5px;">
                <i class="fas fa-lightbulb" style="color: #f1c40f;"></i>
                <span>3. ุงูุชุธุฑ ุงุณุชุฎุฑุงุฌ ุงููุต</span>
            </div>
        </div>
    </div>
</div>



        
        
   <!-- ุงุณุชุจุฏุงู ูุณู ุงูุชุนูููุงุช ุงูุญุงูู ุจูุฐุง ุงูููุฏ -->
<div class="collapsible-instructions" id="instructions-container">
    <div class="instructions-header" onclick="toggleInstructions()">
        <h3>ููููุฉ ุงูุงุณุชุฎุฏุงู</h3>
        <div class="toggle-icon" id="toggle-icon">โผ</div>
    </div>
    <div class="instructions-content" id="instructions-content">
        <div class="instructions-body">
            <ul>
                <li>ุงูุตู ุฃู ุงูุชุจ ุฃู ูุต ูู ุงูุนููุฏ ุงูุฃูุณุฑ</li>
                <li>ุงููุชูุฌุฉ ุชุธูุฑ ุชููุงุฆูุงู ูู ุงูุนููุฏ ุงูุฃููู</li>
                <li>ุจุนุฏ ุธููุฑ ุงููุชูุฌุฉุ ูุถุงู ุตู ุฌุฏูุฏ ุชููุงุฆูุงู</li>
                <li>ุงูุจุฑูุงูุฌ ูุชุนุฑู ุนูู ุงูุนูููุงุช ูุซู: <strong>28695-D1760-219=26716</strong></li>
                <li>ูุชุฌุงูู ุงูุฃุญุฑู ุบูุฑ ุงูุฑูููุฉ (Dุ RMBุ USDุ ุฅูุฎ)</li>
            </ul>
            
            <div class="auto-check-info">
                โก ุงููุญุต ุชููุงุฆู - ุงููุชูุฌุฉ ุชุธูุฑ ููุฑุงู ุนูุฏ ุงููุตู ุฃู ุงููุชุงุจุฉ
            </div>
            
            
        </div>
    </div>
</div>

        <!-- ุงุณุชุจุฏุงู ุงูุฌุฏูู ุงูุญุงูู ุจูุฐุง ุงููููู -->
        <div class="table-container">
            <table class="calculation-table" id="calculation-table">
                <thead>
                    <tr>
                        <th width="35%">ูุชูุฌุฉ ุงููุญุต</th>
                        <th width="65%">ุงููุต ุงููุฏุฎู</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- ุณูุชู ุฅุถุงูุฉ ุงูุตููู ููุง ุฏููุงููููุงู -->
                </tbody>
            </table>
        </div>

        <div class="actions">
            <button class="clear-btn" onclick="clearAllRows()">ูุณุญ ุฌููุน ุงูุตููู</button>
        </div>

        <div class="footer">
            <p>ุชู ุฅูุดุงุก ูุฐู ุงูุฃุฏุงุฉ ุจูุงุณุทุฉ MEDO 2026 </p>
        </div>
    </div>

    <script>
        // ุฃูุซูุฉ ูุตูุฉ ุชุญุชูู ุนูู ุนูููุงุช ุญุณุงุจูุฉ
        const examples = [
            // ูุซุงู 1: ูุต ูุญุชูู ุนูู ุฃุญุฑู ุบูุฑ ูุงุชูููุฉ
            `ไฃ lily SHOP,ALI MOSTAFS,3BAG,439PCS,28695-D1760-219=26716RMB`,

            // ูุซุงู 2: ูุงุชูุฑุฉ ุดุญู
            `ๆSHOP,ALI MOSTAFS,1BAG,144PCS,6720-D50=6670RMB`,

            // ูุซุงู 3: ูุต ูุน ุฃุญุฑู ุตูููุฉ
            `ๅๅไปทๆผ: 15000ๅ\nๆๆฃ: 500ๅ\nๅฎไป้้ข: 15000-ๆๆฃ500=14500ๅ`
        ];

        // ุนุฏุฏ ุงูุตููู ุงูุญุงูู
        let rowCount = 0;
        let lastFocusedRowId = null;





        // ุฅุถุงูุฉ ูุฐู ุงูุฏูุงู ูู ุจุฏุงูุฉ ุงูู script ุจุนุฏ ุชุนุฑูู ุงููุชุบูุฑุงุช

// ุญุงูุฉ ูุณู ุงูุชุนูููุงุช (ูุทูู ุฃู ููุชูุญ)
let instructionsCollapsed = false;

// ุฏุงูุฉ ูุทู ููุฑุฏ ูุณู ุงูุชุนูููุงุช
function toggleInstructions() {
    const content = document.getElementById('instructions-content');
    const icon = document.getElementById('toggle-icon');
    const container = document.getElementById('instructions-container');
    
    instructionsCollapsed = !instructionsCollapsed;
    
    if (instructionsCollapsed) {
        // ุทู ุงููุณู
        content.classList.add('collapsed');
        icon.classList.add('collapsed');
        container.style.borderBottomLeftRadius = '8px';
        container.style.borderBottomRightRadius = '8px';
        
        // ุญูุธ ุงูุญุงูุฉ ูู localStorage
        localStorage.setItem('instructionsCollapsed', 'true');
    } else {
        // ูุฑุฏ ุงููุณู
        content.classList.remove('collapsed');
        icon.classList.remove('collapsed');
        
        // ุฅุฒุงูุฉ ุงูุญุงูุฉ ูู localStorage
        localStorage.removeItem('instructionsCollapsed');
    }
}

// ุฏุงูุฉ ูุชุญููู ุญุงูุฉ ุงูุชุนูููุงุช ูู localStorage
function loadInstructionsState() {
    const savedState = localStorage.getItem('instructionsCollapsed');
    
    if (savedState === 'true') {
        instructionsCollapsed = true;
        
        // ุชุทุจูู ุงูุญุงูุฉ ุงููุญููุธุฉ
        setTimeout(() => {
            const content = document.getElementById('instructions-content');
            const icon = document.getElementById('toggle-icon');
            const container = document.getElementById('instructions-container');
            
            if (content && icon && container) {
                content.classList.add('collapsed');
                icon.classList.add('collapsed');
                container.style.borderBottomLeftRadius = '8px';
                container.style.borderBottomRightRadius = '8px';
            }
        }, 100);
    }
}

// ุฏุงูุฉ ูุฅุบูุงู ุงูุชุนูููุงุช ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง (ุงุฎุชูุงุฑู)
function setupClickOutside() {
    document.addEventListener('click', function(event) {
        const instructionsContainer = document.getElementById('instructions-container');
        const instructionsHeader = document.querySelector('.instructions-header');
        
        // ุฅุฐุง ูุงูุช ุงูุชุนูููุงุช ููุชูุญุฉ ูุชู ุงูููุฑ ุฎุงุฑุฌูุง
        if (!instructionsCollapsed && 
            instructionsContainer && 
            !instructionsContainer.contains(event.target) &&
            event.target !== instructionsHeader) {
            
            // ุฅุบูุงู ุงูุชุนูููุงุช ููุท ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ
            if (window.innerWidth < 768) {
                toggleInstructions();
            }
        }
    });
}





        // ุฏุงูุฉ ูุฅูุดุงุก ุตู ุฌุฏูุฏ ูู ุงูุฌุฏูู
        function createTableRow(isEmpty = true) {
            rowCount++;
            const rowId = `row-${Date.now()}-${rowCount}`;
            const row = document.createElement('tr');

            if (isEmpty) {
                row.className = 'empty-row';
            }

            row.id = rowId;
            row.innerHTML = `
                <td class="result-cell" id="result-${rowId}">
                    <div class="row-number">ุงูุตู #${rowCount}</div>
                    <div id="result-text-${rowId}">${isEmpty ? 'ุงููุชูุฌุฉ ุณุชุธูุฑ ููุง' : ''}</div>
                    <div id="result-details-${rowId}" class="operation-details" style="display: none;"></div>
                </td>
                <td class="input-cell">
                    <div class="text-input-container">
                        <div class="paste-indicator" id="paste-indicator-${rowId}">ุชู ุงููุตู โ</div>
                        <textarea 
                            id="input-${rowId}" 
                            class="text-input" 
                            placeholder="ุงูุตู ุฃู ุงูุชุจ ุงููุต ููุง..."
                            oninput="handleInput('${rowId}')"
                            onpaste="showPasteIndicator('${rowId}')"
                            onfocus="setLastFocusedRow('${rowId}')"
                        ></textarea>
                    </div>
                </td>
            `;

            return { row, rowId };
        }

        // ุฏุงูุฉ ูุฅุถุงูุฉ ุตู ุฌุฏูุฏ ููุฌุฏูู
        function addTableRow(isEmpty = true) {
            const tableBody = document.getElementById('table-body');
            const { row, rowId } = createTableRow(isEmpty);
            tableBody.appendChild(row);

            // ุฅุฐุง ูุงู ุงูุตู ูุงุฑุบุงูุ ูุฑูุฒ ุนูู ุญูู ุงูุฅุฏุฎุงู
            if (isEmpty) {
                setTimeout(() => {
                    const inputField = document.getElementById(`input-${rowId}`);
                    if (inputField) {
                        inputField.focus();
                    }
                }, 100);
            }

            return rowId;
        }

        // ุฏุงูุฉ ูุชุญุฏูุซ ุฃุฑูุงู ุงูุตููู
        function updateRowNumbers() {
            const rows = document.querySelectorAll('#table-body tr');
            rowCount = 0;

            rows.forEach((row, index) => {
                rowCount++;
                const rowNumberDiv = row.querySelector('.row-number');
                if (rowNumberDiv) {
                    rowNumberDiv.textContent = `ุงูุตู #${rowCount}`;
                }
            });
        }

        // ุฏุงูุฉ ูุฅุฏุฑุงุฌ ูุซุงู
        function insertExample(exampleNumber) {
            // ุฅูุฌุงุฏ ุขุฎุฑ ุตู ูุงุฑุบ ุฃู ุฅูุดุงุก ุตู ุฌุฏูุฏ
            let targetRowId = lastFocusedRowId;

            if (!targetRowId) {
                const emptyRows = document.querySelectorAll('.empty-row');
                if (emptyRows.length > 0) {
                    targetRowId = emptyRows[emptyRows.length - 1].id;
                } else {
                    targetRowId = addTableRow(true);
                }
            }

            const index = exampleNumber - 1;
            if (index >= 0 && index < examples.length) {
                const inputField = document.getElementById(`input-${targetRowId}`);
                if (inputField) {
                    inputField.value = examples[index];
                    checkAndDisplayResult(targetRowId);
                    showPasteIndicator(targetRowId);
                }
            }
        }

        // ุฏุงูุฉ ูุฅุธูุงุฑ ูุคุดุฑ ุงููุตู
        function showPasteIndicator(rowId) {
            const indicator = document.getElementById(`paste-indicator-${rowId}`);
            if (indicator) {
                indicator.classList.add('showing');

                setTimeout(() => {
                    indicator.classList.remove('showing');
                }, 1500);
            }
        }

        // ุฏุงูุฉ ูุชุญุฏูุฏ ุขุฎุฑ ุตู ุชู ุงูุชุฑููุฒ ุนููู
        function setLastFocusedRow(rowId) {
            lastFocusedRowId = rowId;
        }

        // ุฏุงูุฉ ููุชุนุงูู ูุน ุงูุฅุฏุฎุงู
        function handleInput(rowId) {
            clearTimeout(window.inputTimeout);
            window.inputTimeout = setTimeout(() => {
                checkAndDisplayResult(rowId);
            }, 800);
        }

        // ุฏุงูุฉ ููุชุญูู ูู ุงููุต ูุนุฑุถ ุงููุชูุฌุฉ
        // ุชุญุฏูุซ ุฏุงูุฉ checkAndDisplayResult
function checkAndDisplayResult(rowId) {
    const inputElement = document.getElementById(`input-${rowId}`);
    const resultElement = document.getElementById(`result-text-${rowId}`);
    const detailsElement = document.getElementById(`result-details-${rowId}`);
    const row = document.getElementById(rowId);
    
    const originalText = inputElement.value.trim();
    
    // ุฅุฐุง ูู ูุชู ุฅุฏุฎุงู ูุต
    if (!originalText) {
        resultElement.textContent = '';
        resultElement.className = '';
        detailsElement.style.display = 'none';
        
        if (row && !row.classList.contains('empty-row')) {
            row.classList.add('empty-row');
            resultElement.textContent = 'ุงููุชูุฌุฉ ุณุชุธูุฑ ููุง';
        }
        return;
    }
    
    // ุฅุฒุงูุฉ ุญุงูุฉ ุงูุตู ุงููุงุฑุบ
    if (row) {
        row.classList.remove('empty-row');
    }
    
    // ุงูุจุญุซ ุนู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ูุงููุฌููุน ูู ุงููุต
    const result = findCalculationsInText(originalText);
    const operations = result.operations;
    const totalCalculated = result.totalCalculated;
    const totalClaimed = result.totalClaimed;
    const hasTotal = result.hasTotal;
    
    // ุนุฑุถ ุงููุชุงุฆุฌ
    if (operations.length === 0) {
        resultElement.textContent = 'ูู ูุชู ุงูุนุซูุฑ ุนูู ุนูููุงุช ุญุณุงุจูุฉ';
        resultElement.className = '';
        detailsElement.style.display = 'none';
    } else {
        const allCorrect = operations.every(op => op.isCorrect);
        const correctCount = operations.filter(op => op.isCorrect).length;
        
        // ุงูุชุญูู ูู ุตุญุฉ ุงููุฌููุน ุฅุฐุง ูุงู ููุฌูุฏุงู
        let totalCheckHTML = '';
        if (hasTotal) {
            const isTotalCorrect = Math.abs(totalCalculated - totalClaimed) < 0.01;
            
            if (isTotalCorrect) {
                totalCheckHTML = `<div style="color: #27ae60; margin-top: 5px; font-size: 14px;">โ ุงููุฌููุน ุงูููู ุตุญูุญ: ${totalClaimed}</div>`;
            } else {
                totalCheckHTML = `<div style="color: #e74c3c; margin-top: 5px; font-size: 14px;">โ ุงููุฌููุน ุงูููู ุฎุทุฃ: ${totalClaimed} (ุงููุฌููุน ุงูุตุญูุญ: ${totalCalculated})</div>`;
            }
        }
        
        if (allCorrect) {
            resultElement.innerHTML = `<span class="correct">โ ุฌููุน ุงูุนูููุงุช ุตุญูุญุฉ (${operations.length})</span>${totalCheckHTML}`;
            resultElement.className = 'correct';
        } else {
            resultElement.innerHTML = `<span class="incorrect">โ ${correctCount}/${operations.length} ุตุญูุญุฉ</span>${totalCheckHTML}`;
            resultElement.className = 'incorrect';
        }
        
        // ุนุฑุถ ุชูุงุตูู ุงูุนูููุงุช
        let detailsHTML = `<div style="margin-bottom: 10px; font-weight: bold;">ุงูุนูููุงุช (${operations.length}):</div>`;
        operations.forEach((op, index) => {
            let statusHTML = '';
            let details = '';
            
            if (op.isCorrect) {
                statusHTML = `<span style="color: #27ae60;">โ ุตุญ</span>`;
                if (op.num3 !== null && op.num3 !== undefined) {
                    details = `${op.num1} - ${op.num2} - ${op.num3} = ${op.expectedResult}`;
                } else {
                    details = `${op.num1} - ${op.num2} = ${op.expectedResult}`;
                }
            } else {
                statusHTML = `<span style="color: #e74c3c;">โ ุฎุทุฃ</span>`;
                if (op.num3 !== null && op.num3 !== undefined) {
                    details = `${op.num1} - ${op.num2} - ${op.num3} = ${op.expectedResult} (ุงูุตุญูุญ: ${op.actualResult.toFixed(0)})`;
                } else {
                    details = `${op.num1} - ${op.num2} = ${op.expectedResult} (ุงูุตุญูุญ: ${op.actualResult.toFixed(0)})`;
                }
            }
            
            detailsHTML += `
                <div style="margin-bottom: 8px; padding: 5px; background: ${index % 2 === 0 ? '#f9f9f9' : '#fff'}; border-radius: 4px;">
                    <div class="operation-highlight">${escapeHtml(op.fullMatch)}</div>
                    <div style="font-size: 12px;">${statusHTML} - ${details}</div>
                </div>
            `;
        });
        
        // ุนุฑุถ ุงููุฌููุน ุงูููู ุฅุฐุง ูุงู ููุฌูุฏุงู
        if (hasTotal) {
            const isTotalCorrect = Math.abs(totalCalculated - totalClaimed) < 0.01;
            
            detailsHTML += `
                <div style="margin-top: 15px; padding: 10px; background: ${isTotalCorrect ? '#e8f6f3' : '#ffebee'}; border-radius: 6px; border-right: 4px solid ${isTotalCorrect ? '#27ae60' : '#e74c3c'};">
                    <div style="font-weight: bold; margin-bottom: 5px;">ูุญุต ุงููุฌููุน ุงูููู:</div>
                    <div>ุงููุฌููุน ุงููุฏุนู: <strong>${totalClaimed}</strong></div>
                    <div>ุงููุฌููุน ุงููุญุณูุจ: <strong>${totalCalculated}</strong></div>
                    <div style="margin-top: 5px; font-weight: bold; color: ${isTotalCorrect ? '#27ae60' : '#e74c3c'}">
                        ${isTotalCorrect ? 'โ ุงููุฌููุน ุงูููู ุตุญูุญ' : 'โ ุงููุฌููุน ุงูููู ุฎุทุฃ'}
                    </div>
                </div>
            `;
        } else if (operations.length > 1) {
            // ุฅุฐุง ูุงู ููุงู ุฃูุซุฑ ูู ุนูููุฉ ูููู ูุง ููุฌุฏ ูุฌููุน ูุฐููุฑ
            detailsHTML += `
                <div style="margin-top: 15px; padding: 8px; background: #f0f7ff; border-radius: 6px; border-right: 4px solid #3498db;">
                    <div style="font-size: 13px; color: #2c3e50;">
                        <strong>ููุงุญุธุฉ:</strong> ููุงู ${operations.length} ุนูููุงุช ูู ุงููุต. ุงููุฌููุน ุงูููู ุงููุญุณูุจ: <strong>${totalCalculated}</strong>
                    </div>
                </div>
            `;
        }
        
        detailsElement.innerHTML = detailsHTML;
        detailsElement.style.display = 'block';
        
        // ุฅุถุงูุฉ ุตู ุฌุฏูุฏ ุจุนุฏ ุงูุชุญูู
        setTimeout(() => {
            addNewRowIfNeeded();
        }, 300);
    }
}

        // ุฏุงูุฉ ููุจุญุซ ุนู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ูู ุงููุต
        // ุชุนุฏูู ุฏุงูุฉ findCalculationsInText ูุฅุฑุฌุงุน ูุนูููุงุช ุฅุถุงููุฉ
function findCalculationsInText(text) {
    const operations = [];
    let totalCalculated = 0;
    let totalClaimed = null;
    
    // ุงูููุท: ุฃู ุชุณูุณู ูุญุชูู ุนูู - ู = ูุน ุฃุฑูุงู
    const pattern = /([\d,]+(?:\.\d+)?)[^\d]*?[-๏ผ๏นฃโโโโ][^\d]*?([\d,]+(?:\.\d+)?)(?:[^\d]*?[-๏ผ๏นฃโโโโ][^\d]*?([\d,]+(?:\.\d+)?))?[^\d]*?=[^\d]*?([\d,]+(?:\.\d+?)?)/gi;
    
    let match;
    
    // ุงูุจุญุซ ุนู ุฌููุน ุงููุทุงุจูุงุช
    while ((match = pattern.exec(text)) !== null) {
        // ุงุณุชุฎุฑุงุฌ ุงูุฃุฑูุงู ูู ุงููุทุงุจูุฉ
        const numbers = [];
        
        for (let i = 1; i < match.length; i++) {
            if (match[i]) {
                const cleanNum = match[i].replace(/[^\d\.]/g, '');
                if (cleanNum) {
                    numbers.push(parseFloat(cleanNum));
                }
            }
        }
        
        if (numbers.length >= 3) {
            const num1 = numbers[0];
            let num2 = numbers[1];
            const expectedResult = numbers[numbers.length - 1];
            
            let num3 = numbers.length > 3 ? numbers[2] : null;
            
            let actualResult = num1 - num2;
            if (num3 !== null) {
                actualResult -= num3;
            }
            
            const roundedActual = Math.round(actualResult * 100) / 100;
            const roundedExpected = Math.round(expectedResult * 100) / 100;
            const isCorrect = Math.abs(roundedActual - roundedExpected) < 0.01;
            
            // ุฌูุน ุงููุชุงุฆุฌ ููุชุญูู ูู ุงููุฌููุน
            totalCalculated += actualResult;
            
            operations.push({
                fullMatch: match[0],
                num1: num1,
                num2: num2,
                num3: num3,
                expectedResult: expectedResult,
                actualResult: actualResult,
                isCorrect: isCorrect
            });
        }
    }
    
    // ุงูุจุญุซ ุนู ุงููุฌููุน ุงูููู ุงููุฐููุฑ ูู ุงููุต
    const totalPatterns = [
        /TOTAL\s*[:=]?\s*([\d,]+(?:\.\d+)?)\s*RMB/i,
        /ุงููุฌููุน\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /ุงูุฅุฌูุงูู\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /ๆป่ฎก\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /ๅ่ฎก\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /ๆป้้ข\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i
    ];
    
    for (const pattern of totalPatterns) {
        const totalMatch = text.match(pattern);
        if (totalMatch) {
            const cleanTotal = totalMatch[1].replace(/[^\d\.]/g, '');
            if (cleanTotal) {
                totalClaimed = parseFloat(cleanTotal);
                break;
            }
        }
    }
    
    return {
        operations: operations,
        totalCalculated: Math.round(totalCalculated * 100) / 100,
        totalClaimed: totalClaimed,
        hasTotal: totalClaimed !== null
    };
}

        // ุฏุงูุฉ ูุฅุถุงูุฉ ุตู ุฌุฏูุฏ ุฅุฐุง ูุฒู ุงูุฃูุฑ
        // ุชุญุฏูุซ ุฏุงูุฉ ุฅุถุงูุฉ ุตู ุฌุฏูุฏ ุฅุฐุง ูุฒู ุงูุฃูุฑ
        function addNewRowIfNeeded() {
            // ุงูุชุญูู ููุง ุฅุฐุง ูุงู ููุงู ุตู ูุงุฑุบ ูู ุงูููุงูุฉ
            const rows = document.querySelectorAll('#table-body tr');
            const lastRow = rows[rows.length - 1];

            if (lastRow) {
                const lastInput = lastRow.querySelector('.text-input');
                if (lastInput && lastInput.value.trim() !== '') {
                    // ุฅุถุงูุฉ ุตู ุฌุฏูุฏ ูุงุฑุบ ุจุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงููุชุฌุงูุจุฉ
                    addResponsiveTableRow(true);
                }
            } else {
                // ุฅุฐุง ูู ููู ููุงู ุตูููุ ูุถูู ุตูุงู ุจุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงููุชุฌุงูุจุฉ
                addResponsiveTableRow(true);
            }
        }

        // ุฏุงูุฉ ููุณุญ ุฌููุน ุงูุตููู
        // ุชุญุฏูุซ ุฏุงูุฉ ูุณุญ ุฌููุน ุงูุตููู
        function clearAllRows() {
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = '';
            rowCount = 0;

            // ุฅุถุงูุฉ ุตู ูุงุฑุบ ุฌุฏูุฏ ุจุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงููุชุฌุงูุจุฉ
            addResponsiveTableRow(true);

            // ุฅุนุงุฏุฉ ุถุจุท ุงูุชุฎุทูุท
            adjustTableLayout();
            updateTableColumns();
        }

        // ุฏุงูุฉ ูุชุฌูุจ ูุดุงูู HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ุฅุถุงูุฉ ุตู ูุงุฑุบ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        // ุชุนุฏูู ุฏุงูุฉ ุชุญููู ุงูุตูุญุฉ
        // ุชุญุฏูุซ ุฏุงูุฉ ุชุญููู ุงูุตูุญุฉ ูุงุณุชุฏุนุงุก ุงูุฏูุงู ุงูุฌุฏูุฏุฉ
window.addEventListener('DOMContentLoaded', function() {
    // ุชุญููู ุญุงูุฉ ุงูุชุนูููุงุช ูู ุงูุฐุงูุฑุฉ ุงููุญููุฉ
    loadInstructionsState();
    
    // ุฅุนุฏุงุฏ ุงูููุฑ ุฎุงุฑุฌ ุงูุชุนูููุงุช (ุงุฎุชูุงุฑู)
    setupClickOutside();
    
    // ุฅุถุงูุฉ ุตููู ูุงุฑุบุฉ
    addResponsiveTableRow(true);
    addResponsiveTableRow(true);
    
    // ุถุจุท ุชุฎุทูุท ุงูุฌุฏูู ุฃูู ูุฑุฉ
    adjustTableLayout();
    updateTableColumns();
    
    // ุฅุถุงูุฉ ูุณุชูุน ูุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ
    window.addEventListener('resize', handleResize);
    
    // ุฅุถุงูุฉ ูุณุชูุน ูุชูุฌูู ุงูุดุงุดุฉ
    window.addEventListener('orientationchange', function() {
        setTimeout(() => {
            adjustTableLayout();
            updateTableColumns();
        }, 300);
    });
    
    // ุฅุบูุงู ุงูุชุนูููุงุช ุชููุงุฆูุงู ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ ุฌุฏุงู
    if (window.innerWidth < 480 && !instructionsCollapsed) {
        setTimeout(() => {
            toggleInstructions();
        }, 1000);
    }
});




        // ุฅุถุงูุฉ ูุฐู ุงูุฏูุงู ูู ููุงูุฉ ุงูู script

        // ุฏุงูุฉ ูุถุจุท ุญุฌู ุงูุฌุฏูู ุญุณุจ ุญุฌู ุงูุดุงุดุฉ
        function adjustTableLayout() {
            const table = document.getElementById('calculation-table');
            const container = document.querySelector('.table-container');
            const screenWidth = window.innerWidth;

            if (!table || !container) return;

            if (screenWidth < 640) {
                // ููุดุงุดุงุช ุงูุตุบูุฑุฉ ุฌุฏุงู
                table.style.minWidth = '500px';
                table.style.fontSize = '14px';

                // ุฅุฎูุงุก ุจุนุถ ุงูุชูุงุตูู ูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ ุฌุฏุงู
                const detailsElements = document.querySelectorAll('.operation-details');
                detailsElements.forEach(el => {
                    if (screenWidth < 480) {
                        el.style.fontSize = '11px';
                        el.style.padding = '4px';
                    }
                });
            } else if (screenWidth < 1024) {
                // ููุดุงุดุงุช ุงููุชูุณุทุฉ
                table.style.minWidth = '100%';
                table.style.fontSize = '15px';
            } else {
                // ููุดุงุดุงุช ุงููุจูุฑุฉ
                table.style.minWidth = '100%';
                table.style.fontSize = '16px';
            }

            // ุถุจุท ุงุฑุชูุงุน ุญููู ุงูุฅุฏุฎุงู ุญุณุจ ุญุฌู ุงูุดุงุดุฉ
            const textInputs = document.querySelectorAll('.text-input');
            textInputs.forEach(input => {
                if (screenWidth < 640) {
                    input.style.height = '90px';
                    input.style.fontSize = '13px';
                } else if (screenWidth < 768) {
                    input.style.height = '100px';
                    input.style.fontSize = '14px';
                } else {
                    input.style.height = '120px';
                    input.style.fontSize = '15px';
                }
            });
        }

        // ุฏุงูุฉ ูุฅุนุงุฏุฉ ุญุณุงุจ ุชุฎุทูุท ุงูุตูุญุฉ ุนูุฏ ุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ
        function handleResize() {
            clearTimeout(window.resizeTimeout);
            window.resizeTimeout = setTimeout(() => {
                adjustTableLayout();
                updateTableColumns();
            }, 250); // ุชุฃุฎูุฑ 250ms ุจุนุฏ ุงูุชูุงุก ุชุบููุฑ ุงูุญุฌู
        }

        // ุฏุงูุฉ ูุชุญุฏูุซ ุฃุนูุฏุฉ ุงูุฌุฏูู ุฏููุงููููุงู
        function updateTableColumns() {
            const table = document.getElementById('calculation-table');
            const screenWidth = window.innerWidth;

            if (!table) return;

            const headers = table.querySelectorAll('th');
            const rows = table.querySelectorAll('tbody tr');

            if (screenWidth < 640) {
                // ููุดุงุดุงุช ุงูุตุบูุฑุฉุ ูุฌุนู ุงูุฃุนูุฏุฉ ุฃุถูู
                if (headers[0]) headers[0].style.width = '40%';
                if (headers[1]) headers[1].style.width = '60%';

                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if (cells[0]) cells[0].style.width = '40%';
                    if (cells[1]) cells[1].style.width = '60%';
                });
            } else {
                // ููุดุงุดุงุช ุงููุจูุฑุฉุ ูุนูุฏ ููุฃุญุฌุงู ุงูุฃุตููุฉ
                if (headers[0]) headers[0].style.width = '35%';
                if (headers[1]) headers[1].style.width = '65%';

                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if (cells[0]) cells[0].style.width = '35%';
                    if (cells[1]) cells[1].style.width = '65%';
                });
            }
        }

        // ุฏุงูุฉ ูุฅุถุงูุฉ ุตู ุฌุฏูุฏ ูุน ูุฑุงุนุงุฉ ุญุฌู ุงูุดุงุดุฉ
        function addResponsiveTableRow(isEmpty = true) {
            const rowId = addTableRow(isEmpty);

            // ุถุจุท ุฎุตุงุฆุต ุงูุตู ุงูุฌุฏูุฏ ุญุณุจ ุญุฌู ุงูุดุงุดุฉ
            setTimeout(() => {
                adjustTableLayout();
                updateTableColumns();
            }, 100);

            return rowId;
        }

        // ุงุณุชุจุฏุงู ุงุณุชุฏุนุงุก addTableRow ุจู addResponsiveTableRow
        // ูู ุฌููุน ุงูุฃูุงูู ุงูุชู ูุชู ูููุง ุฅุถุงูุฉ ุตู ุฌุฏูุฏ




        // ุฏุงูุฉ ูุชุดุบูู ุตูุช ุงูููุฑ (ุงุฎุชูุงุฑู)
function playToggleSound() {
    try {
        // ุฅูุดุงุก ุตูุช ุงูููุฑ ุจุณูุท ุจุงุณุชุฎุฏุงู Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.value = instructionsCollapsed ? 600 : 400;
        oscillator.type = 'sine';
        
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.1);
    } catch (e) {
        // ุชุฌุงูู ุงูุฃุฎุทุงุก ุฅุฐุง ูู ููู Web Audio API ูุฏุนููุงู
        console.log("Web Audio API not supported");
    }
}

// ุชุญุฏูุซ ุฏุงูุฉ toggleInstructions ูุฅุถุงูุฉ ุงูุตูุช
function toggleInstructions() {
    const content = document.getElementById('instructions-content');
    const icon = document.getElementById('toggle-icon');
    const container = document.getElementById('instructions-container');
    
    // ุชุดุบูู ุตูุช ุงูููุฑ (ุงุฎุชูุงุฑู)
    playToggleSound();
    
    instructionsCollapsed = !instructionsCollapsed;
    
    if (instructionsCollapsed) {
        // ุทู ุงููุณู
        content.classList.add('collapsed');
        icon.classList.add('collapsed');
        container.style.borderBottomLeftRadius = '8px';
        container.style.borderBottomRightRadius = '8px';
        
        // ุญูุธ ุงูุญุงูุฉ ูู localStorage
        localStorage.setItem('instructionsCollapsed', 'true');
    } else {
        // ูุฑุฏ ุงููุณู
        content.classList.remove('collapsed');
        icon.classList.remove('collapsed');
        
        // ุฅุฒุงูุฉ ุงูุญุงูุฉ ูู localStorage
        localStorage.removeItem('instructionsCollapsed');
    }
}




// ูุชุบูุฑุงุช ุงููุงููุฑุง
let cameraStream = null;
let currentCamera = 'environment'; // 'environment' ููุฎูููุฉุ 'user' ููุฃูุงููุฉ
let capturedPhoto = null;

// ุนูุงุตุฑ DOM
const cameraBtn = document.getElementById('camera-btn');
const cameraModal = document.getElementById('camera-modal');
const closeCameraBtn = document.getElementById('close-camera');
const cameraVideo = document.getElementById('camera-video');
const captureBtn = document.getElementById('capture-btn');
const flipCameraBtn = document.getElementById('flip-camera');
const photoCanvas = document.getElementById('photo-canvas');
const ocrResult = document.getElementById('ocr-result');
const extractedText = document.getElementById('extracted-text');
const actionButtons = document.getElementById('action-buttons');
const useTextBtn = document.getElementById('use-text-btn');
const retryBtn = document.getElementById('retry-btn');
const ocrLoading = document.getElementById('ocr-loading');

// ูุชุญ ูุงูุฐุฉ ุงููุงููุฑุง
cameraBtn.addEventListener('click', openCamera);
closeCameraBtn.addEventListener('click', closeCamera);
captureBtn.addEventListener('click', capturePhoto);
flipCameraBtn.addEventListener('click', flipCamera);
useTextBtn.addEventListener('click', useExtractedText);
retryBtn.addEventListener('click', retryCapture);

// ุฏุงูุฉ ูุชุญ ุงููุงููุฑุง
async function openCamera() {
    try {
        cameraModal.style.display = 'flex';
        
        // ุทูุจ ุฅุฐู ุงููุตูู ูููุงููุฑุง
        cameraStream = await navigator.mediaDevices.getUserMedia({
            video: {
                facingMode: currentCamera,
                width: { ideal: 1280 },
                height: { ideal: 720 }
            },
            audio: false
        });
        
        // ุนุฑุถ ุงูููุฏูู
        cameraVideo.srcObject = cameraStream;
        cameraVideo.play();
        
        // ุฅุนุงุฏุฉ ุชุนููู ุงูุนูุงุตุฑ
        photoCanvas.style.display = 'none';
        ocrResult.style.display = 'none';
        actionButtons.style.display = 'none';
        ocrLoading.style.display = 'none';
        
    } catch (error) {
        console.error('ุฎุทุฃ ูู ูุชุญ ุงููุงููุฑุง:', error);
        alert('ุชุนุฐุฑ ุงููุตูู ุฅูู ุงููุงููุฑุง. ูุฑุฌู ุงูุชุญูู ูู ุงูุฅุฐููุงุช.');
        closeCamera();
    }
}

// ุฏุงูุฉ ุฅุบูุงู ุงููุงููุฑุง
function closeCamera() {
    // ุฅููุงู ุชุฏูู ุงูููุฏูู
    if (cameraStream) {
        cameraStream.getTracks().forEach(track => track.stop());
        cameraStream = null;
    }
    
    cameraModal.style.display = 'none';
    cameraVideo.srcObject = null;
}

// ุฏุงูุฉ ุงูุชูุงุท ุตูุฑุฉ
function capturePhoto() {
    const context = photoCanvas.getContext('2d');
    
    // ุถุจุท ุฃุจุนุงุฏ canvas ูุชุชูุงุณุจ ูุน ุงูููุฏูู
    photoCanvas.width = cameraVideo.videoWidth;
    photoCanvas.height = cameraVideo.videoHeight;
    
    // ุฑุณู ุงูููุฏูู ุนูู canvas
    context.drawImage(cameraVideo, 0, 0, photoCanvas.width, photoCanvas.height);
    
    // ุญูุธ ุงูุตูุฑุฉ
    capturedPhoto = photoCanvas.toDataURL('image/jpeg');
    
    // ุฅุฎูุงุก ุงูููุฏูู ูุฅุธูุงุฑ ุงูุตูุฑุฉ
    cameraVideo.style.display = 'none';
    photoCanvas.style.display = 'block';
    
    // ุงุณุชุฎุฑุงุฌ ุงููุต ูู ุงูุตูุฑุฉ
    extractTextFromImage(capturedPhoto);
}

// ุฏุงูุฉ ุงุณุชุฎุฑุงุฌ ุงููุต ุจุงุณุชุฎุฏุงู Tesseract.js
async function extractTextFromImage(imageData) {
    try {
        // ุฅุธูุงุฑ ูุคุดุฑ ุงูุชุญููู
        ocrLoading.style.display = 'block';
        ocrResult.style.display = 'none';
        actionButtons.style.display = 'none';
        
        // ุงุณุชุฎุฏุงู Tesseract.js ูุงุณุชุฎุฑุงุฌ ุงููุต
        const { data: { text } } = await Tesseract.recognize(
            imageData,
            'ara+eng', // ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
            {
                logger: progress => {
                    console.log('ุชูุฏู ุงูุงุณุชุฎุฑุงุฌ:', progress);
                }
            }
        );
        
        // ุฅุฎูุงุก ูุคุดุฑ ุงูุชุญููู
        ocrLoading.style.display = 'none';
        
        // ุชูุธูู ุงููุต ุงููุณุชุฎุฑุฌ
        const cleanedText = cleanExtractedText(text);
        
        // ุนุฑุถ ุงููุต ุงููุณุชุฎุฑุฌ
        extractedText.textContent = cleanedText;
        ocrResult.style.display = 'block';
        actionButtons.style.display = 'flex';
        
    } catch (error) {
        console.error('ุฎุทุฃ ูู ุงุณุชุฎุฑุงุฌ ุงููุต:', error);
        ocrLoading.style.display = 'none';
        extractedText.textContent = 'ุนุฐุฑุงูุ ุชุนุฐุฑ ุงุณุชุฎุฑุงุฌ ุงููุต ูู ุงูุตูุฑุฉ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.';
        ocrResult.style.display = 'block';
        actionButtons.style.display = 'flex';
    }
}

// ุฏุงูุฉ ุชูุธูู ุงููุต ุงููุณุชุฎุฑุฌ
function cleanExtractedText(text) {
    return text
        .replace(/\n\s*\n/g, '\n') // ุฅุฒุงูุฉ ุงูุฃุณุทุฑ ุงููุงุฑุบุฉ ุงููุชุนุฏุฏุฉ
        .replace(/\s+/g, ' ') // ุฅุฒุงูุฉ ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ
        .trim();
}

// ุฏุงูุฉ ุงุณุชุฎุฏุงู ุงููุต ุงููุณุชุฎุฑุฌ
function useExtractedText() {
    const text = extractedText.textContent.trim();
    
    if (text && text !== '') {
        // ุฅูุฌุงุฏ ุงูุตู ุงููุงุฑุบ ุงูุฃุฎูุฑ ุฃู ุฅุถุงูุฉ ุตู ุฌุฏูุฏ
        const rows = document.querySelectorAll('#table-body tr');
        let targetRowId = null;
        
        // ุงูุจุญุซ ุนู ุตู ูุงุฑุบ
        for (let row of rows) {
            const inputId = `input-${row.id}`;
            const inputField = document.getElementById(inputId);
            if (inputField && inputField.value.trim() === '') {
                targetRowId = row.id;
                break;
            }
        }
        
        // ุฅุฐุง ูู ููุฌุฏ ุตู ูุงุฑุบุ ูุถูู ุตู ุฌุฏูุฏ
        if (!targetRowId) {
            targetRowId = addResponsiveTableRow(true);
        }
        
        // ุฅุฏุฎุงู ุงููุต ูู ุญูู ุงูุฅุฏุฎุงู
        const inputField = document.getElementById(`input-${targetRowId}`);
        if (inputField) {
            inputField.value = text;
            // ูุญุต ุงููุต ุชููุงุฆูุงู
            checkAndDisplayResult(targetRowId);
        }
        
        // ุฅุบูุงู ูุงูุฐุฉ ุงููุงููุฑุง
        closeCamera();
    }
}

// ุฏุงูุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ
function retryCapture() {
    // ุฅุนุงุฏุฉ ุงูุนุฑุถ ูููุงููุฑุง
    cameraVideo.style.display = 'block';
    photoCanvas.style.display = 'none';
    ocrResult.style.display = 'none';
    actionButtons.style.display = 'none';
    capturedPhoto = null;
}

// ุฏุงูุฉ ุชุจุฏูู ุงููุงููุฑุง
async function flipCamera() {
    // ุฅููุงู ุงููุงููุฑุง ุงูุญุงููุฉ
    if (cameraStream) {
        cameraStream.getTracks().forEach(track => track.stop());
    }
    
    // ุชุจุฏูู ููุน ุงููุงููุฑุง
    currentCamera = currentCamera === 'environment' ? 'user' : 'environment';
    
    // ุฅุนุงุฏุฉ ูุชุญ ุงููุงููุฑุง ุจุงูููุน ุงูุฌุฏูุฏ
    try {
        cameraStream = await navigator.mediaDevices.getUserMedia({
            video: {
                facingMode: currentCamera,
                width: { ideal: 1280 },
                height: { ideal: 720 }
            },
            audio: false
        });
        
        cameraVideo.srcObject = cameraStream;
        cameraVideo.play();
        
    } catch (error) {
        console.error('ุฎุทุฃ ูู ุชุจุฏูู ุงููุงููุฑุง:', error);
        alert('ุชุนุฐุฑ ุชุจุฏูู ุงููุงููุฑุง.');
    }
}

// ุฅุถุงูุฉ ุญุฏุซ ุฅุบูุงู ุจุงูููุฑ ุฎุงุฑุฌ ุงููุงูุฐุฉ
cameraModal.addEventListener('click', function(event) {
    if (event.target === cameraModal) {
        closeCamera();
    }
});

// ุฅุถุงูุฉ ุญุฏุซ ุฅุบูุงู ุจููุชุงุญ ESC
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape' && cameraModal.style.display === 'flex') {
        closeCamera();
    }
});

// ุชุฏุฑูุจ Tesseract ูุณุจูุงู ูุชุญุณูู ุงูุฃุฏุงุก
async function preloadTesseract() {
    try {
        console.log('ุฌุงุฑู ุชุญููู Tesseract...');
        await Tesseract.createWorker('ara+eng');
        console.log('Tesseract ุฌุงูุฒ ููุงุณุชุฎุฏุงู');
    } catch (error) {
        console.error('ุฎุทุฃ ูู ุชุญููู Tesseract:', error);
    }
}

// ุชุญููู Tesseract ุนูุฏ ุจุฏุก ุงูุชุทุจูู
window.addEventListener('load', function() {
    setTimeout(preloadTesseract, 1000);
});







    </script>
</body>

</html>
