<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ­Øµ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© - Ø¬Ø¯ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ</title>
    <!-- Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¯Ø§Ø®Ù„ <head> -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§®</text></svg>">
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            margin: 0;
            padding: 15px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            padding: 15px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 22px;
        }

        .description {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .calculation-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .calculation-table th {
            background-color: #3498db;
            color: white;
            padding: 12px;
            text-align: center;
            font-size: 16px;
            position: sticky;
            top: 0;
        }

        .calculation-table td {
            padding: 12px;
            border: 1px solid #e0e0e0;
            text-align: center;
            vertical-align: top;
        }

        .input-cell {
            background-color: #f8f9fa;
        }

        .result-cell {
            background-color: #f0f7ff;
            font-weight: bold;
            width: 35%;
            min-width: 120px;
        }

        .correct {
            color: #27ae60;
        }

        .incorrect {
            color: #e74c3c;
        }

        .text-input {
            width: 100%;
            height: 100px;
            padding: 10px;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 6px;
            resize: vertical;
            transition: border 0.3s;
            font-family: monospace;
            line-height: 1.4;
        }

        .text-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .instructions {
            background-color: #f8f9fa;
            border-right: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .instructions h3 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 18px;
        }

        .instructions ul {
            padding-right: 18px;
            margin-bottom: 0;
        }

        .instructions li {
            margin-bottom: 8px;
            font-size: 14px;
        }

        .examples {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .example-btn {
            background-color: #ecf0f1;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 13px;
            flex: 1;
            min-width: 120px;
            text-align: center;
        }

        .example-btn:hover {
            background-color: #d5dbdb;
        }

        .actions {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .clear-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 12px 24px;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .clear-btn:hover {
            background-color: #c0392b;
        }

        .footer {
            text-align: center;
            margin-top: 25px;
            color: #7f8c8d;
            font-size: 13px;
        }

        .auto-check-info {
            background-color: #e8f6f3;
            padding: 8px 12px;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 13px;
            text-align: center;
            border-right: 3px solid #1abc9c;
        }

        .operation-details {
            margin-top: 8px;
            padding: 6px;
            background-color: #f9f9f9;
            border-radius: 4px;
            font-size: 12px;
            text-align: right;
        }

        .operation-highlight {
            background-color: #fffacd;
            padding: 3px 6px;
            border-radius: 3px;
            font-family: monospace;
            margin: 4px 0;
            font-size: 13px;
            word-break: break-all;
        }

        .paste-indicator {
            position: absolute;
            top: 5px;
            left: 5px;
            background-color: rgba(52, 152, 219, 0.9);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .text-input-container {
            position: relative;
        }

        .showing {
            opacity: 1;
        }

        .row-number {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .calculation-table {
                display: block;
                overflow-x: auto;
            }

            .calculation-table th,
            .calculation-table td {
                min-width: 150px;
            }

            .result-cell {
                width: 40%;
            }
        }

        .empty-row {
            opacity: 0.7;
        }

        .empty-row .text-input {
            border-style: dashed;
            border-color: #aaa;
        }

        .status-icon {
            font-size: 20px;
            margin-left: 5px;
        }



        /* Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ */

        .table-container {
            width: 100%;
            overflow-x: auto;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .calculation-table {
            width: 100%;
            min-width: 600px;
            /* Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
            border-collapse: collapse;
            transition: all 0.3s ease;
        }

        /* Ù†Ù…Ø· Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
        @media (max-width: 640px) {
            .calculation-table {
                min-width: 500px;
            }

            .calculation-table th,
            .calculation-table td {
                padding: 10px 8px;
                font-size: 14px;
            }

            .text-input {
                height: 90px;
                font-size: 13px;
                padding: 8px;
            }

            .result-cell {
                min-width: 100px;
            }
        }

        /* Ù†Ù…Ø· Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© */
        @media (min-width: 641px) and (max-width: 1024px) {
            .calculation-table {
                min-width: 100%;
            }

            .result-cell {
                width: 30%;
            }

            .input-cell {
                width: 70%;
            }
        }

        /* Ù†Ù…Ø· Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        @media (min-width: 1025px) {
            .calculation-table {
                min-width: 100%;
            }

            .container {
                max-width: 1200px;
            }
        }

        /* Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ· ØªÙ…Ø±ÙŠØ± Ø£Ù†ÙŠÙ‚ Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
        .table-container::-webkit-scrollbar {
            height: 8px;
        }

        .table-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }



        /* Ø¥ØµÙ„Ø§Ø­ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù„Ù…Ø³ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 768px) {
            body {
                -webkit-text-size-adjust: 100%;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            }

            .text-input {
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
            }

            /* ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ */
            .table-container {
                -webkit-overflow-scrolling: touch;
            }

            /* ØªØ­Ø³ÙŠÙ† Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
            .result-text {
                font-size: 16px !important;
            }

            .row-number {
                font-size: 11px;
            }
        }




        /* Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ */

        .collapsible-instructions {
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .instructions-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: #3498db;
            color: white;
            cursor: pointer;
            user-select: none;
        }

        .instructions-header h3 {
            margin: 0;
            font-size: 18px;
            color: white;
        }

        .toggle-icon {
            font-size: 20px;
            transition: transform 0.3s ease;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toggle-icon.collapsed {
            transform: rotate(180deg);
        }

        .instructions-content {
            padding: 0;
            max-height: 1000px;
            opacity: 1;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .instructions-content.collapsed {
            padding: 0;
            max-height: 0;
            opacity: 0;
        }

        .instructions-body {
            padding: 15px;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .instructions-header {
                padding: 12px;
            }

            .instructions-header h3 {
                font-size: 16px;
            }

            .instructions-body {
                padding: 12px;
            }
        }



        /* Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
.instructions-header {
    transition: background-color 0.2s ease;
}

.instructions-header:hover {
    background-color: #2980b9;
}

/* ØªØ£Ø«ÙŠØ± Ù„Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± */
.instructions-header:active {
    background-color: #2472a4;
    transform: translateY(1px);
}

/* ØªØ­Ø³ÙŠÙ† Ù…Ø¸Ù‡Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
.instructions-body ul {
    padding-right: 18px;
    margin-bottom: 15px;
}

.instructions-body li {
    margin-bottom: 8px;
    padding-right: 5px;
    transition: color 0.2s ease;
}

.instructions-body li:hover {
    color: #2c3e50;
}

/* ØªØ­Ø³ÙŠÙ† Ù…Ø¸Ù‡Ø± Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
.examples {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 15px;
}

.example-btn {
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.example-btn:active {
    transform: scale(0.98);
}

/* ØªØ£Ø«ÙŠØ± Ø±Ø§Ø¦Ø¹ Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
.example-btn::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
}

.example-btn:focus:not(:active)::after {
    animation: ripple 1s ease-out;
}

@keyframes ripple {
    0% {
        transform: scale(0, 0);
        opacity: 0.5;
    }
    100% {
        transform: scale(20, 20);
        opacity: 0;
    }
}





/* Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ø³ØªØ§ÙŠÙ„ */

.total-check {
    margin-top: 10px;
    padding: 10px;
    border-radius: 6px;
    font-size: 14px;
}

.total-correct {
    background-color: #e8f6f3;
    border-right: 4px solid #27ae60;
    color: #27ae60;
}

.total-incorrect {
    background-color: #ffebee;
    border-right: 4px solid #e74c3c;
    color: #e74c3c;
}

.operations-count {
    font-size: 12px;
    color: #7f8c8d;
    margin-bottom: 8px;
}




    </style>
</head>

<body>


    <div class="container">
        <h1>Ø£Ø¯Ø§Ø© ÙØ­Øµ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ©   </h1>
        
   <!-- Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù‚Ø³Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ -->
<div class="collapsible-instructions" id="instructions-container">
    <div class="instructions-header" onclick="toggleInstructions()">
        <h3>ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h3>
        <div class="toggle-icon" id="toggle-icon">â–¼</div>
    </div>
    <div class="instructions-content" id="instructions-content">
        <div class="instructions-body">
            <ul>
                <li>Ø§Ù„ØµÙ‚ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø£ÙŠ Ù†Øµ ÙÙŠ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠØ³Ø±</li>
                <li>Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠÙ…Ù†</li>
                <li>Ø¨Ø¹Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù†ØªÙŠØ¬Ø©ØŒ ÙŠØ¶Ø§Ù ØµÙ Ø¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</li>
                <li>Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ø«Ù„: <strong>28695-D1760-219=26716</strong></li>
                <li>ÙŠØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø­Ø±Ù ØºÙŠØ± Ø§Ù„Ø±Ù‚Ù…ÙŠØ© (DØŒ RMBØŒ USDØŒ Ø¥Ù„Ø®)</li>
            </ul>
            
            <div class="auto-check-info">
                âš¡ Ø§Ù„ÙØ­Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠ - Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± ÙÙˆØ±Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ù„ØµÙ‚ Ø£Ùˆ Ø§Ù„ÙƒØªØ§Ø¨Ø©
            </div>
            
            
        </div>
    </div>
</div>

        <!-- Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù‡ÙŠÙƒÙ„ -->
        <div class="table-container">
            <table class="calculation-table" id="calculation-table">
                <thead>
                    <tr>
                        <th width="35%">Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙØ­Øµ</th>
                        <th width="65%">Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¯Ø®Ù„</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙÙˆÙ Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </tbody>
            </table>
        </div>

        <div class="actions">
            <button class="clear-btn" onclick="clearAllRows()">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ</button>
        </div>

        <div class="footer">
            <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© Ø¨ÙˆØ§Ø³Ø·Ø© MEDO 2026 </p>
        </div>
    </div>

    <script>
        // Ø£Ù…Ø«Ù„Ø© Ù†ØµÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¹Ù…Ù„ÙŠØ§Øª Ø­Ø³Ø§Ø¨ÙŠØ©
        const examples = [
            // Ù…Ø«Ø§Ù„ 1: Ù†Øµ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù ØºÙŠØ± Ù„Ø§ØªÙŠÙ†ÙŠØ©
            `ä”£ lily SHOP,ALI MOSTAFS,3BAG,439PCS,28695-D1760-219=26716RMB`,

            // Ù…Ø«Ø§Ù„ 2: ÙØ§ØªÙˆØ±Ø© Ø´Ø­Ù†
            `æ™“SHOP,ALI MOSTAFS,1BAG,144PCS,6720-D50=6670RMB`,

            // Ù…Ø«Ø§Ù„ 3: Ù†Øµ Ù…Ø¹ Ø£Ø­Ø±Ù ØµÙŠÙ†ÙŠØ©
            `å•†å“ä»·æ ¼: 15000å…ƒ\næŠ˜æ‰£: 500å…ƒ\nå®ä»˜é‡‘é¢: 15000-æŠ˜æ‰£500=14500å…ƒ`
        ];

        // Ø¹Ø¯Ø¯ Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ø­Ø§Ù„ÙŠ
        let rowCount = 0;
        let lastFocusedRowId = null;





        // Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„ ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù€ script Ø¨Ø¹Ø¯ ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª

// Ø­Ø§Ù„Ø© Ù‚Ø³Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª (Ù…Ø·ÙˆÙŠ Ø£Ùˆ Ù…ÙØªÙˆØ­)
let instructionsCollapsed = false;

// Ø¯Ø§Ù„Ø© Ù„Ø·ÙŠ ÙˆÙØ±Ø¯ Ù‚Ø³Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª
function toggleInstructions() {
    const content = document.getElementById('instructions-content');
    const icon = document.getElementById('toggle-icon');
    const container = document.getElementById('instructions-container');
    
    instructionsCollapsed = !instructionsCollapsed;
    
    if (instructionsCollapsed) {
        // Ø·ÙŠ Ø§Ù„Ù‚Ø³Ù…
        content.classList.add('collapsed');
        icon.classList.add('collapsed');
        container.style.borderBottomLeftRadius = '8px';
        container.style.borderBottomRightRadius = '8px';
        
        // Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ localStorage
        localStorage.setItem('instructionsCollapsed', 'true');
    } else {
        // ÙØ±Ø¯ Ø§Ù„Ù‚Ø³Ù…
        content.classList.remove('collapsed');
        icon.classList.remove('collapsed');
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ù† localStorage
        localStorage.removeItem('instructionsCollapsed');
    }
}

// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…Ù† localStorage
function loadInstructionsState() {
    const savedState = localStorage.getItem('instructionsCollapsed');
    
    if (savedState === 'true') {
        instructionsCollapsed = true;
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        setTimeout(() => {
            const content = document.getElementById('instructions-content');
            const icon = document.getElementById('toggle-icon');
            const container = document.getElementById('instructions-container');
            
            if (content && icon && container) {
                content.classList.add('collapsed');
                icon.classList.add('collapsed');
                container.style.borderBottomLeftRadius = '8px';
                container.style.borderBottomRightRadius = '8px';
            }
        }, 100);
    }
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
function setupClickOutside() {
    document.addEventListener('click', function(event) {
        const instructionsContainer = document.getElementById('instructions-container');
        const instructionsHeader = document.querySelector('.instructions-header');
        
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…ÙØªÙˆØ­Ø© ÙˆØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        if (!instructionsCollapsed && 
            instructionsContainer && 
            !instructionsContainer.contains(event.target) &&
            event.target !== instructionsHeader) {
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©
            if (window.innerWidth < 768) {
                toggleInstructions();
            }
        }
    });
}





        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ ØµÙ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
        function createTableRow(isEmpty = true) {
            rowCount++;
            const rowId = `row-${Date.now()}-${rowCount}`;
            const row = document.createElement('tr');

            if (isEmpty) {
                row.className = 'empty-row';
            }

            row.id = rowId;
            row.innerHTML = `
                <td class="result-cell" id="result-${rowId}">
                    <div class="row-number">Ø§Ù„ØµÙ #${rowCount}</div>
                    <div id="result-text-${rowId}">${isEmpty ? 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§' : ''}</div>
                    <div id="result-details-${rowId}" class="operation-details" style="display: none;"></div>
                </td>
                <td class="input-cell">
                    <div class="text-input-container">
                        <div class="paste-indicator" id="paste-indicator-${rowId}">ØªÙ… Ø§Ù„Ù„ØµÙ‚ âœ“</div>
                        <textarea 
                            id="input-${rowId}" 
                            class="text-input" 
                            placeholder="Ø§Ù„ØµÙ‚ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."
                            oninput="handleInput('${rowId}')"
                            onpaste="showPasteIndicator('${rowId}')"
                            onfocus="setLastFocusedRow('${rowId}')"
                        ></textarea>
                    </div>
                </td>
            `;

            return { row, rowId };
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¬Ø¯ÙˆÙ„
        function addTableRow(isEmpty = true) {
            const tableBody = document.getElementById('table-body');
            const { row, rowId } = createTableRow(isEmpty);
            tableBody.appendChild(row);

            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØµÙ ÙØ§Ø±ØºØ§Ù‹ØŒ Ù†Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
            if (isEmpty) {
                setTimeout(() => {
                    const inputField = document.getElementById(`input-${rowId}`);
                    if (inputField) {
                        inputField.focus();
                    }
                }, 100);
            }

            return rowId;
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØµÙÙˆÙ
        function updateRowNumbers() {
            const rows = document.querySelectorAll('#table-body tr');
            rowCount = 0;

            rows.forEach((row, index) => {
                rowCount++;
                const rowNumberDiv = row.querySelector('.row-number');
                if (rowNumberDiv) {
                    rowNumberDiv.textContent = `Ø§Ù„ØµÙ #${rowCount}`;
                }
            });
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¯Ø±Ø§Ø¬ Ù…Ø«Ø§Ù„
        function insertExample(exampleNumber) {
            // Ø¥ÙŠØ¬Ø§Ø¯ Ø¢Ø®Ø± ØµÙ ÙØ§Ø±Øº Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ ØµÙ Ø¬Ø¯ÙŠØ¯
            let targetRowId = lastFocusedRowId;

            if (!targetRowId) {
                const emptyRows = document.querySelectorAll('.empty-row');
                if (emptyRows.length > 0) {
                    targetRowId = emptyRows[emptyRows.length - 1].id;
                } else {
                    targetRowId = addTableRow(true);
                }
            }

            const index = exampleNumber - 1;
            if (index >= 0 && index < examples.length) {
                const inputField = document.getElementById(`input-${targetRowId}`);
                if (inputField) {
                    inputField.value = examples[index];
                    checkAndDisplayResult(targetRowId);
                    showPasteIndicator(targetRowId);
                }
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„Ù„ØµÙ‚
        function showPasteIndicator(rowId) {
            const indicator = document.getElementById(`paste-indicator-${rowId}`);
            if (indicator) {
                indicator.classList.add('showing');

                setTimeout(() => {
                    indicator.classList.remove('showing');
                }, 1500);
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø¢Ø®Ø± ØµÙ ØªÙ… Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„ÙŠÙ‡
        function setLastFocusedRow(rowId) {
            lastFocusedRowId = rowId;
        }

        // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        function handleInput(rowId) {
            clearTimeout(window.inputTimeout);
            window.inputTimeout = setTimeout(() => {
                checkAndDisplayResult(rowId);
            }, 800);
        }

        // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Øµ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
        // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© checkAndDisplayResult
function checkAndDisplayResult(rowId) {
    const inputElement = document.getElementById(`input-${rowId}`);
    const resultElement = document.getElementById(`result-text-${rowId}`);
    const detailsElement = document.getElementById(`result-details-${rowId}`);
    const row = document.getElementById(rowId);
    
    const originalText = inputElement.value.trim();
    
    // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ
    if (!originalText) {
        resultElement.textContent = '';
        resultElement.className = '';
        detailsElement.style.display = 'none';
        
        if (row && !row.classList.contains('empty-row')) {
            row.classList.add('empty-row');
            resultElement.textContent = 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§';
        }
        return;
    }
    
    // Ø¥Ø²Ø§Ù„Ø© Ø­Ø§Ù„Ø© Ø§Ù„ØµÙ Ø§Ù„ÙØ§Ø±Øº
    if (row) {
        row.classList.remove('empty-row');
    }
    
    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© ÙˆØ§Ù„Ù…Ø¬Ù…ÙˆØ¹ ÙÙŠ Ø§Ù„Ù†Øµ
    const result = findCalculationsInText(originalText);
    const operations = result.operations;
    const totalCalculated = result.totalCalculated;
    const totalClaimed = result.totalClaimed;
    const hasTotal = result.hasTotal;
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    if (operations.length === 0) {
        resultElement.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù…Ù„ÙŠØ§Øª Ø­Ø³Ø§Ø¨ÙŠØ©';
        resultElement.className = '';
        detailsElement.style.display = 'none';
    } else {
        const allCorrect = operations.every(op => op.isCorrect);
        const correctCount = operations.filter(op => op.isCorrect).length;
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        let totalCheckHTML = '';
        if (hasTotal) {
            const isTotalCorrect = Math.abs(totalCalculated - totalClaimed) < 0.01;
            
            if (isTotalCorrect) {
                totalCheckHTML = `<div style="color: #27ae60; margin-top: 5px; font-size: 14px;">âœ“ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ ØµØ­ÙŠØ­: ${totalClaimed}</div>`;
            } else {
                totalCheckHTML = `<div style="color: #e74c3c; margin-top: 5px; font-size: 14px;">âœ— Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ø®Ø·Ø£: ${totalClaimed} (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ØµØ­ÙŠØ­: ${totalCalculated})</div>`;
            }
        }
        
        if (allCorrect) {
            resultElement.innerHTML = `<span class="correct">âœ“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ØµØ­ÙŠØ­Ø© (${operations.length})</span>${totalCheckHTML}`;
            resultElement.className = 'correct';
        } else {
            resultElement.innerHTML = `<span class="incorrect">âœ— ${correctCount}/${operations.length} ØµØ­ÙŠØ­Ø©</span>${totalCheckHTML}`;
            resultElement.className = 'incorrect';
        }
        
        // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        let detailsHTML = `<div style="margin-bottom: 10px; font-weight: bold;">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (${operations.length}):</div>`;
        operations.forEach((op, index) => {
            let statusHTML = '';
            let details = '';
            
            if (op.isCorrect) {
                statusHTML = `<span style="color: #27ae60;">âœ“ ØµØ­</span>`;
                if (op.num3 !== null && op.num3 !== undefined) {
                    details = `${op.num1} - ${op.num2} - ${op.num3} = ${op.expectedResult}`;
                } else {
                    details = `${op.num1} - ${op.num2} = ${op.expectedResult}`;
                }
            } else {
                statusHTML = `<span style="color: #e74c3c;">âœ— Ø®Ø·Ø£</span>`;
                if (op.num3 !== null && op.num3 !== undefined) {
                    details = `${op.num1} - ${op.num2} - ${op.num3} = ${op.expectedResult} (Ø§Ù„ØµØ­ÙŠØ­: ${op.actualResult.toFixed(0)})`;
                } else {
                    details = `${op.num1} - ${op.num2} = ${op.expectedResult} (Ø§Ù„ØµØ­ÙŠØ­: ${op.actualResult.toFixed(0)})`;
                }
            }
            
            detailsHTML += `
                <div style="margin-bottom: 8px; padding: 5px; background: ${index % 2 === 0 ? '#f9f9f9' : '#fff'}; border-radius: 4px;">
                    <div class="operation-highlight">${escapeHtml(op.fullMatch)}</div>
                    <div style="font-size: 12px;">${statusHTML} - ${details}</div>
                </div>
            `;
        });
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        if (hasTotal) {
            const isTotalCorrect = Math.abs(totalCalculated - totalClaimed) < 0.01;
            
            detailsHTML += `
                <div style="margin-top: 15px; padding: 10px; background: ${isTotalCorrect ? '#e8f6f3' : '#ffebee'}; border-radius: 6px; border-right: 4px solid ${isTotalCorrect ? '#27ae60' : '#e74c3c'};">
                    <div style="font-weight: bold; margin-bottom: 5px;">ÙØ­Øµ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:</div>
                    <div>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…Ø¯Ø¹ÙŠ: <strong>${totalClaimed}</strong></div>
                    <div>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…Ø­Ø³ÙˆØ¨: <strong>${totalCalculated}</strong></div>
                    <div style="margin-top: 5px; font-weight: bold; color: ${isTotalCorrect ? '#27ae60' : '#e74c3c'}">
                        ${isTotalCorrect ? 'âœ“ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ ØµØ­ÙŠØ­' : 'âœ— Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ø®Ø·Ø£'}
                    </div>
                </div>
            `;
        } else if (operations.length > 1) {
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø£ÙƒØ«Ø± Ù…Ù† Ø¹Ù…Ù„ÙŠØ© ÙˆÙ„ÙƒÙ† Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¬Ù…ÙˆØ¹ Ù…Ø°ÙƒÙˆØ±
            detailsHTML += `
                <div style="margin-top: 15px; padding: 8px; background: #f0f7ff; border-radius: 6px; border-right: 4px solid #3498db;">
                    <div style="font-size: 13px; color: #2c3e50;">
                        <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ù†Ø§Ùƒ ${operations.length} Ø¹Ù…Ù„ÙŠØ§Øª ÙÙŠ Ø§Ù„Ù†Øµ. Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ø§Ù„Ù…Ø­Ø³ÙˆØ¨: <strong>${totalCalculated}</strong>
                    </div>
                </div>
            `;
        }
        
        detailsElement.innerHTML = detailsHTML;
        detailsElement.style.display = 'block';
        
        // Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚
        setTimeout(() => {
            addNewRowIfNeeded();
        }, 300);
    }
}

        // Ø¯Ø§Ù„Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© ÙÙŠ Ø§Ù„Ù†Øµ
        // ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© findCalculationsInText Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
function findCalculationsInText(text) {
    const operations = [];
    let totalCalculated = 0;
    let totalClaimed = null;
    
    // Ø§Ù„Ù†Ù…Ø·: Ø£ÙŠ ØªØ³Ù„Ø³Ù„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ - Ùˆ = Ù…Ø¹ Ø£Ø±Ù‚Ø§Ù…
    const pattern = /([\d,]+(?:\.\d+)?)[^\d]*?[-ï¼ï¹£âˆ’â€â€“â€”][^\d]*?([\d,]+(?:\.\d+)?)(?:[^\d]*?[-ï¼ï¹£âˆ’â€â€“â€”][^\d]*?([\d,]+(?:\.\d+)?))?[^\d]*?=[^\d]*?([\d,]+(?:\.\d+?)?)/gi;
    
    let match;
    
    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø§Øª
    while ((match = pattern.exec(text)) !== null) {
        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©
        const numbers = [];
        
        for (let i = 1; i < match.length; i++) {
            if (match[i]) {
                const cleanNum = match[i].replace(/[^\d\.]/g, '');
                if (cleanNum) {
                    numbers.push(parseFloat(cleanNum));
                }
            }
        }
        
        if (numbers.length >= 3) {
            const num1 = numbers[0];
            let num2 = numbers[1];
            const expectedResult = numbers[numbers.length - 1];
            
            let num3 = numbers.length > 3 ? numbers[2] : null;
            
            let actualResult = num1 - num2;
            if (num3 !== null) {
                actualResult -= num3;
            }
            
            const roundedActual = Math.round(actualResult * 100) / 100;
            const roundedExpected = Math.round(expectedResult * 100) / 100;
            const isCorrect = Math.abs(roundedActual - roundedExpected) < 0.01;
            
            // Ø¬Ù…Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
            totalCalculated += actualResult;
            
            operations.push({
                fullMatch: match[0],
                num1: num1,
                num2: num2,
                num3: num3,
                expectedResult: expectedResult,
                actualResult: actualResult,
                isCorrect: isCorrect
            });
        }
    }
    
    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ø§Ù„Ù…Ø°ÙƒÙˆØ± ÙÙŠ Ø§Ù„Ù†Øµ
    const totalPatterns = [
        /TOTAL\s*[:=]?\s*([\d,]+(?:\.\d+)?)\s*RMB/i,
        /Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /æ€»è®¡\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /åˆè®¡\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i,
        /æ€»é‡‘é¢\s*[:=]?\s*([\d,]+(?:\.\d+)?)/i
    ];
    
    for (const pattern of totalPatterns) {
        const totalMatch = text.match(pattern);
        if (totalMatch) {
            const cleanTotal = totalMatch[1].replace(/[^\d\.]/g, '');
            if (cleanTotal) {
                totalClaimed = parseFloat(cleanTotal);
                break;
            }
        }
    }
    
    return {
        operations: operations,
        totalCalculated: Math.round(totalCalculated * 100) / 100,
        totalClaimed: totalClaimed,
        hasTotal: totalClaimed !== null
    };
}

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
        // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
        function addNewRowIfNeeded() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ØµÙ ÙØ§Ø±Øº ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
            const rows = document.querySelectorAll('#table-body tr');
            const lastRow = rows[rows.length - 1];

            if (lastRow) {
                const lastInput = lastRow.querySelector('.text-input');
                if (lastInput && lastInput.value.trim() !== '') {
                    // Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯ ÙØ§Ø±Øº Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨Ø©
                    addResponsiveTableRow(true);
                }
            } else {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØµÙÙˆÙØŒ Ù†Ø¶ÙŠÙ ØµÙØ§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨Ø©
                addResponsiveTableRow(true);
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ
        // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ
        function clearAllRows() {
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = '';
            rowCount = 0;

            // Ø¥Ø¶Ø§ÙØ© ØµÙ ÙØ§Ø±Øº Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨Ø©
            addResponsiveTableRow(true);

            // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ØªØ®Ø·ÙŠØ·
            adjustTableLayout();
            updateTableColumns();
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Ø¥Ø¶Ø§ÙØ© ØµÙ ÙØ§Ø±Øº Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        // ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
window.addEventListener('DOMContentLoaded', function() {
    // ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
    loadInstructionsState();
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    setupClickOutside();
    
    // Ø¥Ø¶Ø§ÙØ© ØµÙÙˆÙ ÙØ§Ø±ØºØ©
    addResponsiveTableRow(true);
    addResponsiveTableRow(true);
    
    // Ø¶Ø¨Ø· ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø£ÙˆÙ„ Ù…Ø±Ø©
    adjustTableLayout();
    updateTableColumns();
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
    window.addEventListener('resize', handleResize);
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø´Ø§Ø´Ø©
    window.addEventListener('orientationchange', function() {
        setTimeout(() => {
            adjustTableLayout();
            updateTableColumns();
        }, 300);
    });
    
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹
    if (window.innerWidth < 480 && !instructionsCollapsed) {
        setTimeout(() => {
            toggleInstructions();
        }, 1000);
    }
});




        // Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù€ script

        // Ø¯Ø§Ù„Ø© Ù„Ø¶Ø¨Ø· Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
        function adjustTableLayout() {
            const table = document.getElementById('calculation-table');
            const container = document.querySelector('.table-container');
            const screenWidth = window.innerWidth;

            if (!table || !container) return;

            if (screenWidth < 640) {
                // Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹
                table.style.minWidth = '500px';
                table.style.fontSize = '14px';

                // Ø¥Ø®ÙØ§Ø¡ Ø¨Ø¹Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹
                const detailsElements = document.querySelectorAll('.operation-details');
                detailsElements.forEach(el => {
                    if (screenWidth < 480) {
                        el.style.fontSize = '11px';
                        el.style.padding = '4px';
                    }
                });
            } else if (screenWidth < 1024) {
                // Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©
                table.style.minWidth = '100%';
                table.style.fontSize = '15px';
            } else {
                // Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©
                table.style.minWidth = '100%';
                table.style.fontSize = '16px';
            }

            // Ø¶Ø¨Ø· Ø§Ø±ØªÙØ§Ø¹ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
            const textInputs = document.querySelectorAll('.text-input');
            textInputs.forEach(input => {
                if (screenWidth < 640) {
                    input.style.height = '90px';
                    input.style.fontSize = '13px';
                } else if (screenWidth < 768) {
                    input.style.height = '100px';
                    input.style.fontSize = '14px';
                } else {
                    input.style.height = '120px';
                    input.style.fontSize = '15px';
                }
            });
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ ØªØ®Ø·ÙŠØ· Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
        function handleResize() {
            clearTimeout(window.resizeTimeout);
            window.resizeTimeout = setTimeout(() => {
                adjustTableLayout();
                updateTableColumns();
            }, 250); // ØªØ£Ø®ÙŠØ± 250ms Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù…
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹
        function updateTableColumns() {
            const table = document.getElementById('calculation-table');
            const screenWidth = window.innerWidth;

            if (!table) return;

            const headers = table.querySelectorAll('th');
            const rows = table.querySelectorAll('tbody tr');

            if (screenWidth < 640) {
                // Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©ØŒ Ù†Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø£Ø¶ÙŠÙ‚
                if (headers[0]) headers[0].style.width = '40%';
                if (headers[1]) headers[1].style.width = '60%';

                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if (cells[0]) cells[0].style.width = '40%';
                    if (cells[1]) cells[1].style.width = '60%';
                });
            } else {
                // Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©ØŒ Ù†Ø¹ÙˆØ¯ Ù„Ù„Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø£ØµÙ„ÙŠØ©
                if (headers[0]) headers[0].style.width = '35%';
                if (headers[1]) headers[1].style.width = '65%';

                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if (cells[0]) cells[0].style.width = '35%';
                    if (cells[1]) cells[1].style.width = '65%';
                });
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ù…Ø±Ø§Ø¹Ø§Ø© Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
        function addResponsiveTableRow(isEmpty = true) {
            const rowId = addTableRow(isEmpty);

            // Ø¶Ø¨Ø· Ø®ØµØ§Ø¦Øµ Ø§Ù„ØµÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
            setTimeout(() => {
                adjustTableLayout();
                updateTableColumns();
            }, 100);

            return rowId;
        }

        // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ addTableRow Ø¨Ù€ addResponsiveTableRow
        // ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„ØªÙŠ ÙŠØªÙ… ÙÙŠÙ‡Ø§ Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯




        // Ø¯Ø§Ù„Ø© Ù„ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
function playToggleSound() {
    try {
        // Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø± Ø¨Ø³ÙŠØ· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.value = instructionsCollapsed ? 600 : 400;
        oscillator.type = 'sine';
        
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.1);
    } catch (e) {
        // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Web Audio API Ù…Ø¯Ø¹ÙˆÙ…Ø§Ù‹
        console.log("Web Audio API not supported");
    }
}

// ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© toggleInstructions Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØª
function toggleInstructions() {
    const content = document.getElementById('instructions-content');
    const icon = document.getElementById('toggle-icon');
    const container = document.getElementById('instructions-container');
    
    // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    playToggleSound();
    
    instructionsCollapsed = !instructionsCollapsed;
    
    if (instructionsCollapsed) {
        // Ø·ÙŠ Ø§Ù„Ù‚Ø³Ù…
        content.classList.add('collapsed');
        icon.classList.add('collapsed');
        container.style.borderBottomLeftRadius = '8px';
        container.style.borderBottomRightRadius = '8px';
        
        // Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ localStorage
        localStorage.setItem('instructionsCollapsed', 'true');
    } else {
        // ÙØ±Ø¯ Ø§Ù„Ù‚Ø³Ù…
        content.classList.remove('collapsed');
        icon.classList.remove('collapsed');
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ù† localStorage
        localStorage.removeItem('instructionsCollapsed');
    }
}







    </script>
</body>

</html>
